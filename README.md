# Locking-Swarm-Cluster-Docker

 Docker has the ability to protect the mutual TLS encryption key and the key used to encrypt and decrypt Raft logs at rest, by allowing you to take ownership of these keys and to require manual unlocking of your managers. This feature is called autolock.

When Docker restarts, you must unlock the swarm first, using a key encryption key generated by Docker when the swarm was locked. You can rotate this key encryption key at any time.

Steps to enable autolocking in Docker Swarm-

```

1. On the master, use the following command to enable auto-locking on the existing swarm cluster
$ sudo docker swarm update --autolock=true
Note: Make sure you copy the unlock-key and save it for later use.

2. Restart the docker daemon to check whether the swarm cluster is locked
$ sudo systemctl docker restart
$ sudo docker service ls

3. Unlock the swarm cluster using the unlock-key saved in first step
$ sudo docker swarm unlock

4. Use the following command to view the current unlock key
$ sudo docker swarm unlock-key

5. Use the following command to rotate the unlock key
$ sudo docker swarm unlock-key --rotate

6. To disable auto-locking on the existing swarm cluster, use the following command:
$ sudo docker swarm update --autolock=false

```


